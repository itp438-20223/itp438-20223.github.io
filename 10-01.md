---
title: Improvements
parent: Assignment 10
grand_parent: Assignments
has_children: false
nav_order: 1
---

# Improvements

In this part, you're going to improve several smaller things with the game.

## Fixing 3rd Person Jump

We're going to fix the 3rd person jump by using the three jump animations we had in TopDown.

First, in Visual Studio, right click on the TopDown project and change it back to your startup project. Then launch it and in the Content Drawer, go to Mannequin>Animations. Select these three animations:

- ThirdPersonJump_End
- ThirdPersonJump_Loop
- ThirdPersonJump_start

Then right click and say Retarget Anim Assets>Duplicate Anim Assets and Retarget. Uncheck "Show Only Compatible Skeletons" and pick the `UE4_Mannequin_Skeleton` which shows up. Then change the "Folder" to `/Game/AnimStarterPack` and click Retarget.

Now in AnimStarterPack, find those three ThirdPersonJump animations and save them. Then select them and right click and say Asset Actions>Migrate. When the dialog comes up saying which assets you're going to migrate, uncheck everything except for the three animations, as otherwise it'll try to migrate things you'll already have in the Multi. Then select the Multi/Content folder as the destination.

Then, close TopDown switch back to Multi as your startup project and launch it. If you then go under the AnimStarterPack folder in Multi, you should see the three ThirdPersonJump animations you migrated, and confirm that when you open them you see the animations play correctly.

Now, change the UE4ASP_HeroTPP_AnimBlueprint so that the jump uses the three animations that transition correctly based on whether you're jumping or not. If you don't remember how this was setup in TopDown, you may want to take a look at the animation blueprint there. Keep in mind that because UE4ASP_HeroTPP has a different state for Idle and Run, which both can lead to jump states, you will need to add transitions and the intermediate start/end states to both. Also, don't forget that you also need to update the tick in the event graph so that it will update any bool you might use for transitions between states.

Once this is setup, you should be able to see the third person model use the jumping animation, like this:

<video style="display:block; margin: 0 auto;" width="640" height="360" controls>
  <source src="assets/10-01.mp4" type="video/mp4">
</video>
{: .note }
Notice how in the jumping animation, the player's arms go to the side so the gun goes there as well. If we wanted to keep the upper body animations the same but only change the lower body animations, it would be possible However, this requires more work. You can look at "[Using Layered Animations](https://docs.unrealengine.com/5.0/en-US/using-layered-animations-in-unreal-engine/)" in the documentation for further information.

## 3rd Person Death Camera

Rather than showing your death in first-person, we'll change it to use a 3rd person camera instead when you die.

First, in MultiCharacter you'll need to create add a `UCameraComponent` called `TP_Camera`. When you create it:

- Attach it to Mesh3P
- Set `bUsePawnControlRotation` to `false`
- Set `bAutoActive` to `false`
- Set the relative location to `(0, -400, 350)`
- Set the relative rotation to `(-45, 90, 0)`

Then when you detect that the player is dead, you need to decide whether it's locally controlled or not, if it is, you need to:

- Make it so the owner can't see the first-person mesh and gun
- Make it so the owner can see the third-person mesh and gun
- Deactivate the first person camera component
- Activate your 3rd-person camera component

Keep in mind this is only changing everything for the local client, but that's fine. The server doesn't need to be involved to handle this.

If this works properly, it should look like this:

<video style="display:block; margin: 0 auto;" width="640" height="360" controls>
  <source src="assets/10-01-2.mp4" type="video/mp4">
</video>

## Death Respawn Timer

Finally, we want to make it so when you die, the local client shows both a message that you're dead as well as a 5 second countdown timer. For this timer, you can completely manage it locally -- the server doesn't have to be involved.

{: .warn }
Handling the respawn timer on the client separately like this only works since the respawn timer is a fixed amount of time. We know it's always 5 seconds so we can just fake showing the timer on the client completely independent from the server. However, if the timer could vary -- for example every time you die, the timer gets longer, then that may require the server to tell us what the correct timer is.

Confirm that when you die now, you see a death message as well as a timer, like this:

<video style="display:block; margin: 0 auto;" width="640" height="360" controls>
  <source src="assets/10-01-3.mp4" type="video/mp4">
</video>

Now it's time to add text chat in [part 2](10-02.html).

